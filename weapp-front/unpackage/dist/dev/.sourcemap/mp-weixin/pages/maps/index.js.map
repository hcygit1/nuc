{"version":3,"sources":["uni-app:///main.js","webpack:///D:/mycode/uniapp_rental_car/weapp-front/pages/maps/index.vue?54ed","webpack:///D:/mycode/uniapp_rental_car/weapp-front/pages/maps/index.vue?021b","webpack:///D:/mycode/uniapp_rental_car/weapp-front/pages/maps/index.vue?cce9","webpack:///D:/mycode/uniapp_rental_car/weapp-front/pages/maps/index.vue?0341","uni-app:///pages/maps/index.vue","webpack:///D:/mycode/uniapp_rental_car/weapp-front/pages/maps/index.vue?25e7"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","renderjs","component","options","__file","components","uPopup","uButton","uToast","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped","data","latitude","longitude","scale","markers","id","name","description","iconPath","width","height","showPopup","selectedMarker","methods","handleMarkerTap","closeMapMark","goto","uni","type","success","window","fail","title","duration","icon","openMap","openNavigation","plus","cancel","buttons","url","webUrl","chooseMap","content","confirmText","cancelText","showCancel"],"mappings":"2IAAA,MAGA,aACA,YAFAA,EAAGC,kCAAoCC,EAGvCC,EAAWC,a,gFCLX,oIACIC,EADJ,QASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,KACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,uBACZ,aAAAF,E,0CCvBf,uQ,iCCAA,IAAIG,EAAJ,0LACA,IACEA,EAAa,CACXC,OAAQ,WACN,OAAO,oHAITC,QAAS,WACP,OAAO,sHAITC,OAAQ,WACN,OAAO,iFAKX,MAAOC,GACP,IAC+C,IAA7CA,EAAEC,QAAQC,QAAQ,wBACa,IAA/BF,EAAEC,QAAQC,QAAQ,QAWlB,MAAMF,EATNG,QAAQC,MAAMJ,EAAEC,SAChBE,QAAQC,MAAM,mBACdD,QAAQC,MACN,uFAEFD,QAAQC,MACN,mDAMN,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,IAEjBC,GAAmB,EACnBC,EAAkB,GACtBR,EAAOS,eAAgB,G,iCC3CvB,yHAAioB,eAAG,G,sHC0BpoB,CACAC,gBACA,OACAC,kBACAC,oBACAC,SACAC,SACA,CACAC,KACAJ,kBACAC,oBACAI,WACAC,sBACAC,iCACAC,SACAC,WAEA,CACAL,KACAJ,kBACAC,oBACAI,UACAC,qBACAC,iCACAC,SACAC,YAGAC,aACAC,oBAGAC,SAEAC,4BACA,wBACA,oDACA,IACA,sBACA,kBACA1B,0EAGA2B,wBACA,mBAEAC,gBAEA,0BACAC,eACAC,aACAC,oBACA/B,sDACA,kBACA,aACA,8JACAgC,wBAEAC,iBACAjC,0BACA6B,aACAK,gBACAC,aACAC,mBAKAC,qBASAC,+BACA,SACA,KACA,wCACAC,2BACAL,eACAM,YACAC,UACAP,cACA,CACAA,cACA,CACAA,iBAEA,YAEA,gBAEA,OAEAQ,EADA,wBACAA,kEACAxB,gDAEAwB,sEACAxB,gDAEAyB,iDACA7B,mEACA,MACA,OAEA4B,EADA,wBACAA,yCACA7B,0GAEA6B,wCACA7B,yGAEA8B,qDACA9B,uGACA,MACA,OAEA6B,GADA,aACAA,qCACA7B,+EAKA8B,+DACA9B,8EACA,MAGA,QACA6B,eAGAH,oCAGA,SAEAK,EADA,WACAA,OACA,WACAA,OAEAA,OAEAf,aACAK,WACAW,0CACAC,iBACAC,gBACAC,cACAjB,oBACA,WACAQ,wBACAvC,wBACA,UACAA,oCAUA,c,6DChMA,yHAA05B,eAAG,G","file":"pages/maps/index.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/maps/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=0ba36393&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/maps/index.vue\"\nexport default component.exports","export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=0ba36393&\"","var components\ntry {\n  components = {\n    uPopup: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-popup/u-popup\" */ \"uview-ui/components/u-popup/u-popup.vue\"\n      )\n    },\n    uButton: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-button/u-button\" */ \"uview-ui/components/u-button/u-button.vue\"\n      )\n    },\n    uToast: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-toast/u-toast\" */ \"uview-ui/components/u-toast/u-toast.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"container\">\n    <!-- 地图组件 -->\n   <map\r\n     id=\"map\"\r\n     :latitude=\"latitude\"\r\n     :longitude=\"longitude\"\r\n     :markers=\"markers\"\r\n     :scale=\"scale\"\r\n     @markertap=\"handleMarkerTap\"\r\n     style=\"width: 100%; height: 40vh;\"\r\n   ></map>\r\n   \r\n   <!-- 标记点信息 -->\r\n   <u-popup :show=\"showPopup\" mode=\"bottom\" @close=\"closeMapMark\">\r\n     <view class=\"popup-content\">\r\n       <text class=\"popup-title\">{{ selectedMarker.name }}</text>\r\n       <text class=\"popup-description\">{{ selectedMarker.description }}</text>\r\n\t\t<u-button style=\"width: 80%;position: absolute;bottom: 50px;left: 10%;\" type=\"primary\" @click=\"goto\">导航过去</u-button>    \r\n\t\t</view>\r\n   </u-popup>\r\n   <u-toast ref=\"uToast\"></u-toast>\n  </view>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\r\n      latitude: 39.90469, // 地图中心纬度\n      longitude: 116.40717, // 地图中心经度\n      scale: 14, // 地图缩放级别\n      markers: [\n        {\n          id: 1,\n          latitude: 39.90469,\n          longitude: 116.40717,\n          name: \"天安门\",\n          description: \"北京市中心地标\",\n          iconPath: \"/static/mark/mark.png\", // 标记点图标\n          width: 30,\n          height: 30,\n        },\n        {\n          id: 2,\n          latitude: 39.91635,\n          longitude: 116.39723,\n          name: \"故宫\",\n          description: \"明清两代皇宫\",\n          iconPath:\"/static/mark/mark.png\", // 标记点图标\n          width: 30,\n          height: 30,\n        },\n      ],\n      showPopup: false, // 控制弹窗显示\n      selectedMarker: {}, // 当前选中的标记点\n    };\n  },\n  methods: {\n    // 点击标记点事件\n    handleMarkerTap(e) {\n      const markerId = e.detail.markerId;\r\n      const marker = this.markers.find((item) => item.id === markerId);\n      if (marker) {\r\n        this.selectedMarker = marker;\n        this.showPopup = true;\r\n\t\t console.log('this.selectedMarker.',JSON.stringify(this.selectedMarker))\r\n      }\n    },\r\n\tcloseMapMark(){\r\n\t\t  this.showPopup = false;\r\n\t},\r\n\tgoto(){\r\n\t\t\r\n\t\tconst selectedMarker=this.selectedMarker\r\n\t\tuni.getLocation({\r\n\t\t  type: 'WGS84',\r\n\t\t  success: function(res) {\r\n\t\t    console.log('this.selectedMarker.',JSON.stringify(selectedMarker))\r\n\t\t\tconst longitude=selectedMarker.longitude;\r\n\t\t\tconst latitude=selectedMarker.latitude;\r\n\t\t\tconst url =`https://uri.amap.com/navigation?key=RCBBZ-JDZWZ-UJAXN-7NFHQ-RP77F-MCBNX&start=${res.longitude},${res.latitude}&end=${longitude},${latitude}`;\r\n\t\t\twindow.location.href = url; // 或者使用uniapp的web-view组件打开这个URL。\r\n\t\t  },\r\n\t\t  fail: function(err) {\r\n\t\t    console.log('获取经纬度失败：', err)\r\n\t\t\tuni.showToast({\r\n\t\t\t    title: '经纬度获取失败',\r\n\t\t\t    duration: 2000,\r\n\t\t\t\ticon:'error'\r\n\t\t\t})\r\n\t\t  }\r\n\t\t})\r\n\t},\r\n\topenMap() {\r\n\t\t\t//点击打开第三方地图APP\r\n\t\t\t// #ifdef APP\r\n\t\t\tthis.openNavigation(this.longitude, this.latitude, this.form.address)\r\n\t\t\t//高德地图\r\n\t\t\t// #endif\r\n\t\t},\r\n\t\t\t\t//打开地图\r\n\t\t\t\t// 导航 会打开导航菜单供用户选择\r\n\topenNavigation(longitude, latitude, name) {\r\n\t\t\t\t\tlet url = \"\"; // app url\r\n\t\t\t\t\tlet webUrl = \"\"; // web url 用来为用户未安装导航软件时打开浏览器所使用url\r\n\t\t\t\t\tlet qqmapkey = \"RCBBZ-JDZWZ-UJAXN-7NFHQ-RP77F-MCBNX\"\r\n\t\t\t\t\tplus.nativeUI.actionSheet({ //选择菜单\r\n\t\t\t\t\t\ttitle: \"选择地图应用\",\r\n\t\t\t\t\t\tcancel: \"取消\",\r\n\t\t\t\t\t\tbuttons: [{\r\n\t\t\t\t\t\t\ttitle: \"高德地图\"\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\ttitle: \"百度地图\"\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\ttitle: \"腾讯地图\"\r\n\t\t\t\t\t\t}] // 可选的地图类型\r\n\t\t\t\t\t}, (e) => {\r\n\t\t\t\t\t\t// 判断用户选择的地图\r\n\t\t\t\t\t\tswitch (e.index) {\r\n\t\t\t\t\t\t\t//下面是拼接url,不同系统以及不同地图都有不同的拼接字段\r\n\t\t\t\t\t\t\tcase 1: //打开高德地图\r\n\t\t\t\t\t\t\t\tif (plus.os.name == \"Android\") { // 安卓\r\n\t\t\t\t\t\t\t\t\turl =\r\n\t\t\t\t\t\t\t\t\t\t`androidamap://viewMap?sourceApplication=appname&poiname=${name}&lat=${latitude}&lon=${longitude}&dev=0`;\r\n\t\t\t\t\t\t\t\t} else { //苹果\r\n\t\t\t\t\t\t\t\t\turl =\r\n\t\t\t\t\t\t\t\t\t\t`iosamap://viewMap?sourceApplication=applicationName&poiname=${name}&lat=${latitude}&lon=${longitude}&dev=0`;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\twebUrl =\r\n\t\t\t\t\t\t\t\t\t`https://uri.amap.com/marker?position=${longitude},${latitude}&name=${name}&src=mypage&coordinate=gaode`\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 2: //打开百度地图\r\n\t\t\t\t\t\t\t\tif (plus.os.name == \"Android\") { // 安卓\r\n\t\t\t\t\t\t\t\t\turl =\r\n\t\t\t\t\t\t\t\t\t\t`baidumap://map/marker?location=${latitude},${longitude}&title=${name}&content=${name}&src=andr.baidu.openAPIdemo&coord_type=gcj02`;\r\n\t\t\t\t\t\t\t\t} else { //苹果\r\n\t\t\t\t\t\t\t\t\turl =\r\n\t\t\t\t\t\t\t\t\t\t`iosamap://map/marker?location=${latitude},${longitude}&title=${name}&content=${name}&src=ios.baidu.openAPIdemo&coord_type=gcj02`;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\twebUrl =\r\n\t\t\t\t\t\t\t\t\t`http://api.map.baidu.com/marker?location=${latitude},${longitude}&title=${name}&content=${name}&output=html&src=webapp.baidu.openAPIdemo`\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 3: //打开腾讯地图\r\n\t\t\t\t\t\t\t\tif (plus.os.name == \"Android\") { // 安卓\r\n\t\t\t\t\t\t\t\t\turl =\r\n\t\t\t\t\t\t\t\t\t\t`qqmap://map/geocoder?coord=${latitude},${longitude}&title${name}&addr=${name}=&referer=${qqmapkey}`\r\n\t\t\t\t\t\t\t\t} else { //苹果\r\n\t\t\t\t\t\t\t\t\turl =\r\n\t\t\t\t\t\t\t\t\t\t`qqmap://map/geocoder?coord=${latitude},${longitude}&title${name}&addr=${name}=&referer=${qqmapkey}`;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\twebUrl =\r\n\t\t\t\t\t\t\t\t\t`https://apis.map.qq.com/uri/v1/marker?marker=coord:${latitude},${longitude}&title=${name}&addr=${name}&referer=${qqmapkey}`\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// 如果选中\r\n\t\t\t\t\t\tif (url != \"\") {\r\n\t\t\t\t\t\t\turl = encodeURI(url);\r\n\t\t\t\t\t\t\t// console.log(url, '地址')\r\n\t\t\t\t\t\t\t// 打开 app 导航 \r\n\t\t\t\t\t\t\tplus.runtime.openURL(url, (err) => { // 失败回到\r\n\t\t\t\t\t\t\t\t// 毕竟用户可能没有安装app但一定安装的有浏览器\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t// 如果失败则说明未安装 直接 打开网页版进行导航\r\n\t\t\t\t\t\t\t\tlet chooseMap = ''\r\n\t\t\t\t\t\t\t\tif (e.index == 1) {\r\n\t\t\t\t\t\t\t\t\tchooseMap = \"高德地图\"\r\n\t\t\t\t\t\t\t\t} else if (e.index == 2) {\r\n\t\t\t\t\t\t\t\t\tchooseMap = \"百度地图\"\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tchooseMap = \"腾讯地图\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\t\t\t\tcontent: '检测到您本机暂未安装' + chooseMap + '应用，是否要选择使用浏览器打开？',\r\n\t\t\t\t\t\t\t\t\tconfirmText: '确定', //确定文本的文字\r\n\t\t\t\t\t\t\t\t\tcancelText: '取消', //确定文本的文字\r\n\t\t\t\t\t\t\t\t\tshowCancel: true, //没有取消按钮的弹框\r\n\t\t\t\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\t\t\t\tplus.runtime.openURL(webUrl)\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.log('用户点击了确定')\r\n\t\t\t\t\t\t\t\t\t\t} else if (res.cancel) {\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.log('用户点击了取消')\r\n\t\t\t\t\t\t\t\t\t\t\t// plus.nativeUI.alert(\"本机未安装指定的地图应用\");\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n  },\n};\n</script>\n\n<style>\n.container {\n  padding: 0px 5px;\n}\n\n.popup-content {\n  padding: 20px;\n  text-align: center;\r\n  height: 200px;\n}\n\n.popup-title {\n  font-size: 18px;\n  font-weight: bold;\n  margin-bottom: 10px;\n}\n\n.popup-description {\n  font-size: 14px;\n  color: #666;\n}\r\n</style>","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}