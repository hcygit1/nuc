{"version":3,"sources":["uni-app:///main.js","webpack:///E:/bishe/projectcode/biyecode/weapp-front/pages/index/maps.vue?bcca","webpack:///E:/bishe/projectcode/biyecode/weapp-front/pages/index/maps.vue?8790","webpack:///E:/bishe/projectcode/biyecode/weapp-front/pages/index/maps.vue?c05a","webpack:///E:/bishe/projectcode/biyecode/weapp-front/pages/index/maps.vue?f246","uni-app:///pages/index/maps.vue"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","latitude","longitude","tabbarHeight","scale","markers","showPopup","selectedMarker","created","onShow","methods","init","console","getPoints","http","uni","title","icon","duration","handleMarkerTap","content","showCancel","confirmText","success","closeMapMark","goto","navigateToAmap","openAmapInApp","name","fail","openAmapByUrlScheme","plus","openAmapInWeb","window","openAmapInMiniProgram","address"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,aAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAiH;AACjH;AACwD;AACL;;;AAGnD;AACmL;AACnL,gBAAgB,uLAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,+EAAM;AACR,EAAE,wFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAirB,CAAgB,gqBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;ACgBrsB;;;;;;;;;;;;;;;;eACA;EACAC;IACA;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MAAA;MACAC;MACAC;MAAA;MACAC;IACA;EACA;EACAC,6BACA;EACAC;IACA;EACA;EACAC;IACAC;MAAA;MACA;QACA;QACAC;QACAA;QAEA;QACA;QACA;UAAA;UAAA;UACA;UAAA;UAAA;UAAA;UAAA;QAAA;MAcA;QACAA;MACA;IACA;IACA;IACAC;MAAA;MACAC;QACA;UACA;UACA;QACA;UACAC;YACAC;YACAC;YACAC;UACA;QACA;MACA;IACA;IACAC;MAAA;MACA;MACA;QAAA;MAAA;MACA;QACA;QACAJ;UACAC;UACAI;UACAC;UACAC;UACAC;YACA;cACA;YACA;cACA;YACA;UACA;QACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACAb;MACA;IACA;IACA;IACAc;MAEAd;MACA;IAUA;IAEA;IACAe;MAAA;MACAZ;QACAd;QACAC;QACA0B;QACAL;UACAX;QACA;QACAiB;UACAjB;UACA;QACA;MACA;IACA;IAEA;IACAkB;MACA;MACAC;QACA;UACAnB;QACA;MACA;IACA;IAEA;IACAoB;MACA;MACAC;IACA;IAEA;IACAC;MACAvC;QACAM;QAAA;QACAC;QAAA;QACA0B;QAAA;QACAO;QAAA;QACA/B;QAAA;QACAmB;UACAX;QACA;QACAiB;UACAjB;QACA;MACA;IACA;EAEA;AACA;AAAA,2B","file":"pages/index/maps.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/index/maps.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./maps.vue?vue&type=template&id=3d5920ed&\"\nvar renderjs\nimport script from \"./maps.vue?vue&type=script&lang=js&\"\nexport * from \"./maps.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../developtool/hbulidx/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/index/maps.vue\"\nexport default component.exports","export * from \"-!../../../../../../developtool/hbulidx/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../developtool/hbulidx/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../developtool/hbulidx/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../developtool/hbulidx/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../developtool/hbulidx/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../developtool/hbulidx/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./maps.vue?vue&type=template&id=3d5920ed&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../developtool/hbulidx/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../developtool/hbulidx/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../developtool/hbulidx/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../developtool/hbulidx/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../developtool/hbulidx/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./maps.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../developtool/hbulidx/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../developtool/hbulidx/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../developtool/hbulidx/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../developtool/hbulidx/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../developtool/hbulidx/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./maps.vue?vue&type=script&lang=js&\"","<template>\n <view>\n\t<view  class=\"map-con\">\r\n\t\t<map style=\"width: 100%; height: 100vh;\"\r\n\t\t :latitude=\"latitude\" \r\n\t\t :longitude=\"longitude\" \r\n\t\t :markers=\"markers\"\r\n\t\t :scale=\"12\"\r\n\t\t @markertap=\"handleMarkerTap\"\r\n\t\t >\r\n\t\t</map>\r\n\t</view>\r\n </view>\n</template>\n\n<script>\r\n\t\timport http from '@/utils/http';\n export default {\r\n\t   data() {\r\n\t     return {\r\n\t\t\tlatitude: 39.90469, // 地图中心纬度\r\n\t\t\tlongitude: 116.40717, // 地图中心经度\r\n\t \t\ttabbarHeight:0,\r\n\t       scale: 14, // 地图缩放级别\r\n\t       markers: [],\r\n\t       showPopup: false, // 控制弹窗显示\r\n\t       selectedMarker: {}, // 当前选中的标记点\r\n\t     };\r\n\t   },\r\n\t   created() {\r\n\t   },\r\n \tonShow(e) {\r\n\t\t  this.getPoints();\r\n \t\t},\r\n \t\tmethods: {\r\n \t\t\t init() {\r\n \t\t\t\tthis.$.getlocation().then(res => {\r\n\t\t\t\t\tconst platform = uni.getSystemInfoSync().platform;\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"===platform==\"+platform)\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"===定位结果==\"+JSON.stringify(res))\r\n\t\t\t\t\t\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\t\t\t\t\t\t this.latitude=res[0].latitude\r\n\t\t\t\t\t\t\t\t\t this.longitude=res[0].longitude\r\n\t\t\t\t\t\t\t\t\t  this.markers.push({\"latitude\":this.latitude,\"longitude\":this.longitude,\r\n\t\t\t\t\t\t\t\t\t  \"iconPath\":'/static/mark/mine_mark.png',\"name\":res[0].name,\"id\":0,\"width\":30,\"height\":30})\r\n\t\t\t\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t\t\t\t// #ifdef APP\r\n\t\t\t\t\t\t\t\t\tthis.latitude=res.latitude\r\n\t\t\t\t\t\t\t\t\tthis.longitude=res.longitude\r\n\t\t\t\t\t\t\t\t\t this.markers.push({\"latitude\":this.latitude,\"longitude\":this.longitude,\r\n\t\t\t\t\t\t\t\t\t \"iconPath\":'/static/mark/mine_mark.png',\"name\":res.address.poiName,\"id\":0})\r\n\t\t\t\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t\t\t\t// #ifdef H5\r\n\t\t\t\t\t\t\t\t\tthis.latitude=res[0].latitude\r\n\t\t\t\t\t\t\t\t\tthis.longitude=res[0].longitude\r\n\t\t\t\t\t\t\t\t\t this.markers.push({\"latitude\":this.latitude,\"longitude\":this.longitude,\r\n\t\t\t\t\t\t\t\t\t \"iconPath\":'/static/mark/mine_mark.png',\"name\":res[0].name,\"id\":0,\"width\":30,\"height\":30})\r\n\t\t\t\t\t\t\t\t\t// #endif\r\n \t\t\t\t}).catch(err => {\r\n \t\t\t\t\tconsole.log(err)\r\n \t\t\t\t})\r\n \t\t\t},\r\n\t\t\t//获取所有租车地点\r\n\t\t\t getPoints(){\r\n\t\t\t  http.get(\"/rentalCars/getpoints\",null).then(res => {\r\n\t\t\t\t\tif( res.code==200){\r\n\t\t\t\t\t this.markers=res.data\r\n\t\t\t\t\t this.init();\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t  uni.showToast({\r\n\t\t\t\t\t\ttitle: res.message,\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t })\r\n\t\t\t\t   }  \r\n\t\t\t\t})\r\n\t\t\t },\r\n\t\t\t handleMarkerTap(e) {\r\n\t\t\t  const markerId = e.detail.markerId;\r\n\t\t\t  const marker = this.markers.find((item) => item.id === markerId);\r\n\t\t\t   if (marker) {\r\n\t\t\t\t this.selectedMarker = marker;\r\n\t\t\t     uni.showModal({\r\n\t\t\t       title: '导航提示',\r\n\t\t\t       content: `是否导航到 ${marker.name}？`,\r\n\t\t\t       showCancel: true,\r\n\t\t\t       confirmText: '导航过去',\r\n\t\t\t       success: (res) => {\r\n\t\t\t         if (res.confirm) {\r\n\t\t\t           this.goto(marker);\r\n\t\t\t         } else if (res.cancel) {\r\n\t\t\t           this.closeMapMark();\r\n\t\t\t         }\r\n\t\t\t       },\r\n\t\t\t     });\r\n\t\t\t   }\r\n\t\t\t },\r\n\t\t\t closeMapMark(){\r\n\t\t\t \t  this.showPopup = false;\r\n\t\t\t },\r\n\t\t\t goto(){\r\n\t\t\t\t console.log(\"：开始导航\")\r\n\t\t\t\tthis.navigateToAmap(this.selectedMarker.latitude,this.selectedMarker.longitude,this.selectedMarker.name)\r\n\t\t\t },\r\n\t\t\t // 示例调用\r\n\t\t\tnavigateToAmap(latitude, longitude, name) {\r\n\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\t console.log(\"：开始导航==MP-WEIXIN\")\r\n\t\t\t\t  this.openAmapInMiniProgram(latitude, longitude, name);\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef APP\r\n\t\t\t\t console.log(\"：开始导航==APP\")\r\n\t\t\t     this.openAmapInApp(latitude, longitude, name);\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\t console.log(\"：开始导航==H5\")\r\n\t\t\t\t this.openAmapInWeb(latitude, longitude, name);\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// APP 端\r\n\t\t\t openAmapInApp(latitude, longitude, name) {\r\n\t\t\t  uni.openLocation({\r\n\t\t\t    latitude: latitude,\r\n\t\t\t    longitude: longitude,\r\n\t\t\t    name: name || '目的地',\r\n\t\t\t    success: () => {\r\n\t\t\t      console.log('成功打开地图');\r\n\t\t\t    },\r\n\t\t\t    fail: (err) => {\r\n\t\t\t      console.log('打开地图失败', err);\r\n\t\t\t      this.openAmapByUrlScheme(latitude, longitude, name);\r\n\t\t\t    }\r\n\t\t\t  });\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// APP 端使用 URL Scheme\r\n\t\t\t openAmapByUrlScheme(latitude, longitude, name) {\r\n\t\t\t  const url = `androidamap://navi?sourceApplication=appname&poiname=${name}&lat=${latitude}&lon=${longitude}&dev=0&style=2`;\r\n\t\t\t  plus.runtime.openURL(url, (err) => {\r\n\t\t\t    if (err) {\r\n\t\t\t      console.log('调起高德地图失败', err);\r\n\t\t\t    }\r\n\t\t\t  });\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// H5 和 Web 端\r\n\t\t\t openAmapInWeb(latitude, longitude, name) {\r\n\t\t\t  const url = `https://uri.amap.com/navigation?to=${longitude},${latitude},${name}&mode=car&src=yourAppName`;\r\n\t\t\t  window.location.href = url;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 微信小程序\r\n\t\t\t openAmapInMiniProgram(latitude, longitude, name) {\r\n\t\t\t    wx.openLocation({\r\n\t\t\t      latitude:  Number(latitude), // 目标纬度\r\n\t\t\t      longitude: Number(longitude), // 目标经度\r\n\t\t\t      name: name, // 地点名称\r\n\t\t\t      address: '', // 地址详情\r\n\t\t\t      scale: 18, // 地图缩放级别\r\n\t\t\t      success: (res) => {\r\n\t\t\t        console.log('打开地图成功', res);\r\n\t\t\t      },\r\n\t\t\t      fail: (err) => {\r\n\t\t\t        console.log('打开地图失败', err);\r\n\t\t\t      },\r\n\t\t\t    });\r\n\t\t\t}\r\n\t\r\n }\n}\n</script>\r\n<style>\n</style>"],"sourceRoot":""}